<!DOCTYPE html>
<html>
<canvas id="c"></canvas>
<script>
var canvas = document.getElementById("c");
canvas.width = window.innerWidth, canvas.height = window.innerHeight;
canvas.style.display = "block", canvas.style.width = "100vw", canvas.style.height = "100vh";
document.body.style.margin = "0";
var ctx = canvas.getContext("2d");
var x=50, y=50, speed=3;
var root2 = Math.sqrt(2);
var left, up, right, down;
var difficulty = "e";
var shots = [];
var corrupt = true, kill = false, destruction = false;
var gun = "c";//c = corrupt gun, k = kill gun, d = destruction gun
function draw() {
	var scale = 5;
	ctx.beginPath();
	ctx.moveTo(x+scale*(1), y+scale*(1+root2));
	ctx.lineTo(x+scale*(1), y-scale*(1+root2));
	ctx.lineTo(x+scale*(1+root2), y-scale*(1));
	ctx.lineTo(x-scale*(1+root2), y-scale*(1));
	ctx.lineTo(x-scale*(1), y-scale*(1+root2));
	ctx.lineTo(x-scale*(1), y+scale*(1+root2));
	ctx.lineTo(x-scale*(1+root2), y+scale*(1));
	ctx.lineTo(x+scale*(1+root2), y+scale*(1));
	ctx.closePath();
	ctx.stroke();
}

function clear() {
	ctx.clearRect(0, 0, canvas.width, canvas.height);
}

function move() {
	if (up) {y -= speed;};
	if (left) {x -= speed;};
	if (right) {x += speed;};
	if (down) {y += speed;};
}

function animate() {
	clear();
	move();
	draw();
	for (var i=0;i<shots.length;i++) {
		shots[i].move();
		shots[i].draw();
	}
	requestAnimationFrame(animate);
}
animate();
document.addEventListener("keydown", function(e) {
	switch (e.key) {
		case "w": case "ArrowUp":
			up = true;
		break;
		case "a": case "ArrowLeft":
			left = true;
		break;
		case "d": case "ArrowRight":
			right = true;
		break;
		case "s": case "ArrowDown":
			down = true;
		break;
		case "1":
			if (corrupt) {gun = "c"};
		break;
		case "2":
			if (kill) {gun = "k"};
		break;
		case "3":
			if (destruction) {gun = "d"};
		break;
	}
});
document.addEventListener("keyup", function(e) {
	switch (e.key) {
		case "w": case "ArrowUp":
			up = false;
		break;
		case "a": case "ArrowLeft":
			left = false;
		break;
		case "d": case "ArrowRight":
			right = false;
		break;
		case "s": case "ArrowDown":
			down = false;
		break;
	}
});
canvas.addEventListener("mousedown", function(e) {
	var theta = Math.atan2(e.offsetY - y, e.offsetX - x);
	var newX = Math.cos(theta);
	var newY = Math.sin(theta);
	new Shot(x, y, newX, newY);
});

function Shot(x, y, dirX, dirY) {
	this.x = x;
	this.y = y;
	this.dirX = dirX;//use two variables so you don't have to do trig maths :)
	this.dirY = dirY;
	this.type = gun;
	this.speed = 3;
	shots.push(this);
	this.move = function() {
		this.x += this.dirX * speed;
		this.y += this.dirY * speed;
	};
	this.draw = function() {
		ctx.beginPath();
		ctx.arc(this.x, this.y, 5, 0, Math.PI * 2);
		ctx.fill();
		ctx.closePath();
	};
}

</script>
</html>